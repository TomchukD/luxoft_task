<form [formGroup]="form" (ngSubmit)="onSave()" class="grid grid-cols-2 gap-4">
  <div class="col-span-2 flex justify-center mb-4">
    <lx-avatar formControlName="avatar" [letter]="formFirstName.value" />
  </div>

  <div>
    <label class="block mb-1 font-medium">First Name</label>
    <input
      fluid
      pInputText
      formControlName="firstName"
      placeholder="First Name"
    />
    @if (form.get("firstName")?.hasError("required")) {
      <p-message severity="error" size="small" variant="simple">
        First Name is required
      </p-message>
    }
  </div>

  <div>
    <label class="block mb-1 font-medium">Last Name</label>
    <input
      fluid
      pInputText
      formControlName="lastName"
      placeholder="Last Name"
    />
  </div>

  <div>
    <label class="block mb-1 font-medium">Nickname</label>
    <input fluid pInputText formControlName="nickname" placeholder="Nickname" />
    @if (form.get("nickname")?.hasError("nicknameTaken")) {
      <p-message severity="error" size="small" variant="simple">
        This nickname is already taken
      </p-message>
    }
    @if (form.get("nickname")?.hasError("required")) {
      <p-message severity="error" size="small" variant="simple">
        Nickname is required
      </p-message>
    }
  </div>

  <div>
    <label class="block mb-1 font-medium">City</label>
    <lx-cities-autocomplete [citiesControl]="formCities" />
  </div>

  <div>
    <label class="block mb-1 font-medium">Phone</label>
    <input
      fluid
      pInputText
      pKeyFilter="num"
      formControlName="phone"
      placeholder="Phone"
      type="tel"
    />
  </div>

  <div class="col-span-2">
    <label class="block mb-1 font-medium">Email</label>
    <input
      fluid
      pInputText
      formControlName="email"
      placeholder="Email"
      type="email"
    />
    @if (form.get("email")?.hasError("email")) {
      <p-message severity="error" size="small" variant="simple">
        Enter a valid email
      </p-message>
    }
  </div>

  <div class="col-span-2">
    <label class="block mb-1 font-medium">Address</label>
    <input
      fluid
      pInputText
      formControlName="address"
      placeholder="Street, Apt"
    />
  </div>

  <div class="col-span-2 flex justify-end gap-2 pt-2">
    <p-button type="submit" label="Apply" />
    <p-button
      type="button"
      severity="secondary"
      (click)="onClose()"
      label="Cancel"
    />
  </div>
</form>
